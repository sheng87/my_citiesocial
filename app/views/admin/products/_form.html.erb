<%= form_with(model: [:admin, product]) do |form| %>

    <%= form_with(model: [:admin, product]) do |form| %>
        <div class="columns">
          <div class="column is-6">
            <div class="field">
              <%= form.label :name, '商品名稱', class: 'label' %>
              <%= form.text_field :name, class: 'input is-medium' %>
            </div>
          </div>
          <div class="column is-6">
            <div class="field">
              <%= form.label :vendor_id, '廠商', class: 'label' %>
              <div class="select is-medium is-fullwidth">
                <%= form.collection_select :vendor_id, Vendor.available, :id, :title %>
              </div>
            </div>
          </div>
        </div>
      
        <div class="columns">
          <div class="column">
            <div class="field">
              <%= form.label :list_price, '定價', class: 'label' %>
              <%= form.number_field :list_price, class: 'input is-medium' %>
            </div>
          </div>
          <div class="column">
            <div class="field">
              <%= form.label :sell_price, '售價', class: 'label' %>
              <%= form.number_field :sell_price, class: 'input is-medium' %>
            </div>
          </div>
        </div>

        <div>
            <%= form.check_box :on_sale %>
            <%= form.label :on_sale, '是否上架？', class: 'label' %>
        </div>
       
        <div class="field">
          <%= form.label :description, '商品描述', class: 'label' %>
          <%= form.rich_text_area :description %>
        </div>

        <hr>
        <h3>庫存項目</h3>
        
        <div data-controller="product-form">

          <template data-target="product-form.template">
            <%= form.fields_for :skus, Sku.new, child_index: 'NEW_RECORD' do |sku| %>
              <%= render 'sku_fields' , form: sku %>
              <%end%>
          </template>

          <%= form.fields_for :skus do |sku_form| %>
          <%= render 'sku_fields' , form: sku_form %>
          <%end%>

            <div data-target="product-form.link">
              <%= link_to "新增品項", '#', class: 'button is-light is-small', data: {action: 'product-form#add_sku'} %>
            </div>
          
        </div>
        
      


        <%= form.submit class: 'button is-primary is-medium' %>
      <% end %>
<% end %>    